<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Intelligent Soil & Climate-Aware Farming System | рокрпБродрпНродро┐роЪро╛ро▓ро┐ роорогрпН рооро▒рпНро▒рпБроорпН роХро╛ро▓роиро┐ро▓рпИ роЕро▒ро┐ро╡рпБро▒рпБродрпНродро▓рпН ро╡ро┐ро╡роЪро╛роп роЕроорпИрокрпНрокрпБ</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Tamil:wght@400;700&family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-color: #2d7a3e;
            --secondary-color: #f39c12;
            --accent-color: #27ae60;
            --dark-bg: #1a1a2e;
            --light-bg: #f8f9fa;
            --text-dark: #2c3e50;
            --text-light: #ecf0f1;
            --card-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        body {
            font-family: 'Poppins', 'Noto Sans Tamil', sans-serif;
            line-height: 1.6;
            color: var(--text-dark);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        /* Header & Navigation */
        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 20px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            padding: 1rem 0;
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .logo i {
            font-size: 2rem;
            color: var(--primary-color);
        }

        .logo-text h1 {
            font-size: 1.5rem;
            color: var(--primary-color);
            font-weight: 700;
        }

        .logo-text p {
            font-size: 0.8rem;
            color: var(--text-dark);
            font-family: 'Noto Sans Tamil', sans-serif;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--text-dark);
            font-weight: 500;
            transition: color 0.3s;
        }

        .nav-links a:hover {
            color: var(--primary-color);
        }

        .lang-toggle {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 0.5rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: transform 0.3s;
        }

        .lang-toggle:hover {
            transform: scale(1.05);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), 
                        url('https://images.unsplash.com/photo-1625246333195-78d9c38ad449?w=1600') center/cover;
            min-height: 70vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            padding: 2rem;
        }

        .hero-content h2 {
            font-size: 3rem;
            margin-bottom: 1rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        }

        .hero-content .tamil-title {
            font-size: 2.5rem;
            font-family: 'Noto Sans Tamil', sans-serif;
            margin-bottom: 1.5rem;
        }

        .hero-content p {
            font-size: 1.2rem;
            max-width: 800px;
            margin: 0 auto 2rem;
            line-height: 1.8;
        }

        .cta-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 1rem 2.5rem;
            border: none;
            border-radius: 50px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: var(--accent-color);
            color: white;
        }

        .btn-primary:hover {
            background: #229954;
            transform: translateY(-3px);
            box-shadow: 0 5px 20px rgba(39, 174, 96, 0.4);
        }

        .btn-secondary {
            background: transparent;
            color: white;
            border: 2px solid white;
        }

        .btn-secondary:hover {
            background: white;
            color: var(--primary-color);
        }

        /* Features Section */
        .features {
            padding: 5rem 2rem;
            background: white;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .section-title {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title h2 {
            font-size: 2.5rem;
            color: var(--primary-color);
            margin-bottom: 0.5rem;
        }

        .section-title .tamil {
            font-family: 'Noto Sans Tamil', sans-serif;
            font-size: 1.8rem;
            color: var(--secondary-color);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .feature-card {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: var(--card-shadow);
            transition: transform 0.3s;
            border: 2px solid transparent;
        }

        .feature-card:hover {
            transform: translateY(-10px);
            border-color: var(--accent-color);
        }

        .feature-icon {
            font-size: 3rem;
            color: var(--accent-color);
            margin-bottom: 1rem;
        }

        .feature-card h3 {
            font-size: 1.3rem;
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        .feature-card .tamil-text {
            font-family: 'Noto Sans Tamil', sans-serif;
            color: var(--secondary-color);
            font-size: 1.1rem;
            margin-bottom: 1rem;
        }

        .feature-card p {
            color: #7f8c8d;
            line-height: 1.6;
        }

        /* Upload Section */
        .upload-section {
            padding: 5rem 2rem;
            background: linear-gradient(135deg, #2d7a3e 0%, #27ae60 100%);
            color: white;
        }

        .upload-container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 3rem;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        }

        .upload-area {
            border: 3px dashed rgba(255, 255, 255, 0.5);
            border-radius: 15px;
            padding: 3rem;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
            background: rgba(255, 255, 255, 0.05);
        }

        .upload-area:hover {
            border-color: white;
            background: rgba(255, 255, 255, 0.1);
        }

        .upload-area i {
            font-size: 4rem;
            margin-bottom: 1rem;
        }

        .upload-area h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }

        .upload-area .tamil-text {
            font-family: 'Noto Sans Tamil', sans-serif;
            font-size: 1.2rem;
            margin-bottom: 1.5rem;
        }

        #imageInput {
            display: none;
        }

        #imagePreview {
            margin-top: 2rem;
            display: none;
        }

        #imagePreview img {
            max-width: 100%;
            max-height: 300px;
            border-radius: 10px;
            box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
        }

        .upload-btn {
            margin-top: 1.5rem;
            background: var(--secondary-color);
            padding: 1rem 3rem;
            display: none;
        }

        .upload-btn:hover {
            background: #e67e22;
        }

        /* System Info */
        .system-info {
            padding: 5rem 2rem;
            background: var(--light-bg);
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .info-card {
            background: white;
            padding: 2rem;
            border-radius: 15px;
            box-shadow: var(--card-shadow);
            border-left: 5px solid var(--accent-color);
        }

        .info-card h4 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }

        .info-card ul {
            list-style: none;
        }

        .info-card ul li {
            padding: 0.5rem 0;
            padding-left: 1.5rem;
            position: relative;
        }

        .info-card ul li:before {
            content: "тЬУ";
            position: absolute;
            left: 0;
            color: var(--accent-color);
            font-weight: bold;
        }

        /* Footer */
        .footer {
            background: var(--dark-bg);
            color: var(--text-light);
            padding: 3rem 2rem 1rem;
            text-align: center;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer h3 {
            margin-bottom: 1rem;
            color: var(--accent-color);
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .social-links a {
            color: var(--text-light);
            font-size: 1.5rem;
            transition: color 0.3s;
        }

        .social-links a:hover {
            color: var(--accent-color);
        }

        /* Loading Spinner */
        .loading {
            display: none;
            text-align: center;
            margin-top: 2rem;
        }

        .spinner {
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 4px solid white;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hero-content h2 {
                font-size: 2rem;
            }

            .hero-content .tamil-title {
                font-size: 1.8rem;
            }

            .section-title h2 {
                font-size: 2rem;
            }

            .upload-container {
                padding: 2rem;
            }
        }

        /* Language Toggle */
        .tamil-content {
            display: none;
        }

        body.tamil-mode .english-content {
            display: none;
        }

        body.tamil-mode .tamil-content {
            display: block;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="nav-container">
            <div class="logo">
                <i class="fas fa-seedling"></i>
                <div class="logo-text">
                    <h1 class="english-content">Smart Farming AI</h1>
                    <h1 class="tamil-content">рокрпБродрпНродро┐роЪро╛ро▓ро┐ ро╡ро┐ро╡роЪро╛роп AI</h1>
                    <p class="english-content">Intelligent Soil & Climate Analysis</p>
                    <p class="tamil-content">рокрпБродрпНродро┐роЪро╛ро▓ро┐ роорогрпН рооро▒рпНро▒рпБроорпН роХро╛ро▓роиро┐ро▓рпИ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ</p>
                </div>
            </div>
            <ul class="nav-links">
                <li><a href="#home" class="english-content">Home</a><a href="#home" class="tamil-content">роорпБроХрокрпНрокрпБ</a></li>
                <li><a href="#features" class="english-content">Features</a><a href="#features" class="tamil-content">роЕроорпНроЪроЩрпНроХро│рпН</a></li>
                <li><a href="#analyze" class="english-content">Analyze</a><a href="#analyze" class="tamil-content">рокроХрпБрокрпНрокро╛ропрпНро╡рпБ</a></li>
                <li><a href="#about" class="english-content">About</a><a href="#about" class="tamil-content">рокро▒рпНро▒ро┐</a></li>
            </ul>
            <button class="lang-toggle" onclick="toggleLanguage()">
                <span class="english-content">родрооро┐ро┤рпН | Tamil</span>
                <span class="tamil-content">English | роЖроЩрпНроХро┐ро▓роорпН</span>
            </button>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="hero-content">
            <h2 class="english-content">Intelligent Soil & Climate-Aware Farming System</h2>
            <h2 class="tamil-content tamil-title">рокрпБродрпНродро┐роЪро╛ро▓ро┐ роорогрпН рооро▒рпНро▒рпБроорпН роХро╛ро▓роиро┐ро▓рпИ роЕро▒ро┐ро╡рпБро▒рпБродрпНродро▓рпН ро╡ро┐ро╡роЪро╛роп роЕроорпИрокрпНрокрпБ</h2>
            
            <p class="english-content">
                Advanced deep learning system for automated soil classification, crop recommendation, 
                and yield prediction using CNN and LSTM networks with real-time climate data integration.
            </p>
            <p class="tamil-content">
                CNN рооро▒рпНро▒рпБроорпН LSTM роирпЖроЯрпНро╡рпКро░рпНроХрпНроХрпБроХро│рпИрокрпН рокропройрпНрокроЯрпБродрпНродро┐ родро╛ройро┐ропроЩрпНроХрпБ роорогрпН ро╡роХрпИрокрпНрокро╛роЯрпБ, рокропро┐ро░рпН рокро░ро┐роирпНродрпБро░рпИ 
                рооро▒рпНро▒рпБроорпН ро╡ро┐ро│рпИроЪрпНроЪро▓рпН роХрогро┐рокрпНрокрпБроХрпНроХро╛рой роорпЗроорпНрокроЯрпНроЯ роЖро┤рпНроирпНрод роХро▒рпНро▒ро▓рпН роЕроорпИрокрпНрокрпБ.
            </p>
            
            <div class="cta-buttons">
                <a href="#analyze" class="btn btn-primary english-content">Analyze Soil Now</a>
                <a href="#analyze" class="btn btn-primary tamil-content">роЗрокрпНрокрпЛродрпБ роорогрпНрогрпИрокрпН рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНропрпБроЩрпНроХро│рпН</a>
                <a href="#features" class="btn btn-secondary english-content">Learn More</a>
                <a href="#features" class="btn btn-secondary tamil-content">роорпЗро▓рпБроорпН роЕро▒ро┐роХ</a>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section class="features" id="features">
        <div class="container">
            <div class="section-title">
                <h2 class="english-content">System Capabilities</h2>
                <h2 class="tamil-content">роХрогро┐ройро┐ родро┐ро▒ройрпНроХро│рпН</h2>
                <p class="tamil english-content">Advanced Agricultural Intelligence</p>
                <p class="tamil tamil-content">роорпЗроорпНрокроЯрпНроЯ ро╡ро┐ро╡роЪро╛роп рокрпБродрпНродро┐роЪро╛ро▓ро┐родрпНродройроорпН</p>
            </div>

            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-microscope"></i>
                    </div>
                    <h3 class="english-content">Soil Classification</h3>
                    <h3 class="tamil-text tamil-content">роорогрпН ро╡роХрпИрокрпНрокро╛роЯрпБ</h3>
                    <p class="english-content">
                        CNN-based automated soil type identification from images with 93% accuracy. 
                        Analyzes visual characteristics to classify soil types.
                    </p>
                    <p class="tamil-content">
                        93% родрпБро▓рпНро▓ро┐ропродрпНродрпБроЯройрпН рокроЯроЩрпНроХро│ро┐ро▓ро┐ро░рпБроирпНродрпБ CNN роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓ро╛рой родро╛ройро┐ропроЩрпНроХрпБ роорогрпН ро╡роХрпИ роЕроЯрпИропро╛ро│роорпН. 
                        роорогрпН ро╡роХрпИроХро│рпИ ро╡роХрпИрокрпНрокроЯрпБродрпНрод роХро╛роЯрпНроЪро┐ рокрогрпНрокрпБроХро│рпИ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНроХро┐ро▒родрпБ.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-cloud-sun"></i>
                    </div>
                    <h3 class="english-content">Climate Analysis</h3>
                    <h3 class="tamil-text tamil-content">роХро╛ро▓роиро┐ро▓рпИ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ</h3>
                    <p class="english-content">
                        Real-time weather data integration using API. LSTM networks model temporal patterns 
                        for accurate predictions.
                    </p>
                    <p class="tamil-content">
                        API роРрокрпН рокропройрпНрокроЯрпБродрпНродро┐ роиро┐роХро┤рпНроирпЗро░ ро╡ро╛ройро┐ро▓рпИ родро░ро╡рпБ роТро░рпБроЩрпНроХро┐рогрпИрокрпНрокрпБ. родрпБро▓рпНро▓ро┐ропрооро╛рой роХрогро┐рокрпНрокрпБроХро│рпБроХрпНроХро╛роХ 
                        LSTM роирпЖроЯрпНро╡рпКро░рпНроХрпНроХрпБроХро│рпН родро▒рпНроХро╛ро▓ро┐роХ ро╡роЯро┐ро╡роЩрпНроХро│рпИ рооро╛родро┐ро░ро┐ропро╛роХрпНроХрпБроХро┐ройрпНро▒рой.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <h3 class="english-content">Crop Recommendation</h3>
                    <h3 class="tamil-text tamil-content">рокропро┐ро░рпН рокро░ро┐роирпНродрпБро░рпИ</h3>
                    <p class="english-content">
                        Intelligent crop suggestions based on soil type and climate conditions. 
                        Optimizes agricultural planning.
                    </p>
                    <p class="tamil-content">
                        роорогрпН ро╡роХрпИ рооро▒рпНро▒рпБроорпН роХро╛ро▓роиро┐ро▓рпИ роиро┐ро▓рпИроорпИроХро│ро┐ройрпН роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓рпН рокрпБродрпНродро┐роЪро╛ро▓ро┐ рокропро┐ро░рпН рокро░ро┐роирпНродрпБро░рпИроХро│рпН. 
                        ро╡ро┐ро╡роЪро╛роп родро┐роЯрпНроЯрооро┐роЯро▓рпИ роЙроХроирпНродродро╛роХрпНроХрпБроХро┐ро▒родрпБ.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3 class="english-content">Yield Prediction</h3>
                    <h3 class="tamil-text tamil-content">ро╡ро┐ро│рпИроЪрпНроЪро▓рпН роХрогро┐рокрпНрокрпБ</h3>
                    <p class="english-content">
                        Multimodal data fusion for accurate yield estimation. Combines visual and 
                        environmental features.
                    </p>
                    <p class="tamil-content">
                        родрпБро▓рпНро▓ро┐ропрооро╛рой ро╡ро┐ро│рпИроЪрпНроЪро▓рпН роородро┐рокрпНрокрпАроЯрпНроЯро┐ро▒рпНроХро╛рой рооро▓рпНроЯро┐роорпЛроЯро▓рпН родро░ро╡рпБ роЗрогрпИрокрпНрокрпБ. роХро╛роЯрпНроЪро┐ рооро▒рпНро▒рпБроорпН 
                        роЪрпБро▒рпНро▒рпБроЪрпНроЪрпВро┤ро▓рпН роЕроорпНроЪроЩрпНроХро│рпИ роТро░рпБроЩрпНроХро┐рогрпИроХрпНроХро┐ро▒родрпБ.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h3 class="english-content">Deep Learning</h3>
                    <h3 class="tamil-text tamil-content">роЖро┤рпНроирпНрод роХро▒рпНро▒ро▓рпН</h3>
                    <p class="english-content">
                        TensorFlow-powered neural networks for complex pattern recognition. 
                        Continuous learning and adaptation.
                    </p>
                    <p class="tamil-content">
                        роЪро┐роХрпНроХро▓ро╛рой ро╡роЯро┐ро╡ роЕроЩрпНроХрпАроХро╛ро░родрпНродро┐ро▒рпНроХро╛рой TensorFlow-роЗропроЩрпНроХрпБроорпН роиро░роорпНрокрпБ ро╡ро▓рпИроХро│рпН. 
                        родрпКроЯро░рпНроЪрпНроЪро┐ропро╛рой роХро▒рпНро▒ро▓рпН рооро▒рпНро▒рпБроорпН родро┤рпБро╡ро▓рпН.
                    </p>
                </div>

                <div class="feature-card">
                    <div class="feature-icon">
                        <i class="fas fa-mobile-alt"></i>
                    </div>
                    <h3 class="english-content">Real-time Processing</h3>
                    <h3 class="tamil-text tamil-content">роиро┐роХро┤рпНроирпЗро░ роЪрпЖропро▓ро╛роХрпНроХроорпН</h3>
                    <p class="english-content">
                        Instant analysis and recommendations. OpenCV-based image processing 
                        for quick results.
                    </p>
                    <p class="tamil-content">
                        роЙроЯройроЯро┐ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ рооро▒рпНро▒рпБроорпН рокро░ро┐роирпНродрпБро░рпИроХро│рпН. ро╡ро┐ро░рпИро╡ро╛рой роорпБроЯро┐ро╡рпБроХро│рпБроХрпНроХрпБ 
                        OpenCV роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓ро╛рой рокроЯ роЪрпЖропро▓ро╛роХрпНроХроорпН.
                    </p>
                </div>
            </div>
        </div>
    </section>

    <!-- Upload Section -->
    <section class="upload-section" id="analyze">
        <div class="container">
            <div class="section-title">
                <h2 class="english-content" style="color: white;">Analyze Your Soil</h2>
                <h2 class="tamil-content" style="color: white;">роЙроЩрпНроХро│рпН роорогрпНрогрпИ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНропрпБроЩрпНроХро│рпН</h2>
            </div>

            <div class="upload-container">
                <form id="uploadForm" method="POST" action="/predict" enctype="multipart/form-data">
                    <div class="upload-area" id="uploadArea">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <h3 class="english-content">Upload Soil Image</h3>
                        <h3 class="tamil-content tamil-text">роорогрпН рокроЯродрпНродрпИрокрпН рокродро┐ро╡рпЗро▒рпНро▒ро╡рпБроорпН</h3>
                        <p class="english-content">Click to select or drag and drop your image</p>
                        <p class="tamil-content">роЙроЩрпНроХро│рпН рокроЯродрпНродрпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХ роЕро▓рпНро▓родрпБ роЗро┤рпБродрпНродрпБ ро╡ро┐роЯрпБро╡родро▒рпНроХрпБ роХро┐ро│ро┐роХрпН роЪрпЖропрпНропро╡рпБроорпН</p>
                        <input type="file" id="imageInput" name="image" accept="image/*" required>
                    </div>

                    <div id="imagePreview">
                        <img id="preview" src="" alt="Preview">
                    </div>

                    <!-- Temporal Features Toggle (NEW - Hybrid LSTM Feature) -->
                    <div style="margin: 2rem 0; text-align: center;">
                        <label style="display: flex; align-items: center; justify-content: center; gap: 0.5rem; cursor: pointer; font-size: 1.1rem;">
                            <input type="checkbox" id="temporalToggle" style="width: 20px; height: 20px; cursor: pointer;">
                            <span class="english-content" style="font-weight: 600;">
                                <i class="fas fa-brain"></i> Use Hybrid Model (CNN + LSTM with Temporal Features)
                            </span>
                            <span class="tamil-content" style="font-weight: 600;">
                                <i class="fas fa-brain"></i> роХро▓рокрпНрокро┐рой рооро╛родро┐ро░ро┐ропрпИрокрпН рокропройрпНрокроЯрпБродрпНродро╡рпБроорпН (CNN + LSTM)
                            </span>
                        </label>
                        <p style="color: #ffd700; margin-top: 0.75rem; font-size: 0.9rem;">
                            <i class="fas fa-info-circle"></i>
                            <span class="english-content"> Standard soil values will be automatically applied based on the detected soil type from your image</span>
                            <span class="tamil-content"> роЙроЩрпНроХро│рпН рокроЯродрпНродро┐ро▓рпН роЗро░рпБроирпНродрпБ роХрогрпНроЯро▒ро┐ропрокрпНрокроЯрпНроЯ роорогрпН ро╡роХрпИропро┐ройрпН роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓рпН роиро┐ро▓рпИропро╛рой роорогрпН роородро┐рокрпНрокрпБроХро│рпН родро╛ройро╛роХро╡рпЗ рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯрпБроорпН</span>
                        </p>
                    </div>

                    <!-- City Selection for Weather -->
                    <div style="margin: 1.5rem 0;">
                        <label style="color: white; font-weight: 600; display: block; margin-bottom: 0.5rem;">
                            <i class="fas fa-map-marker-alt"></i>
                            <span class="english-content"> Select Your Location</span>
                            <span class="tamil-content"> роЙроЩрпНроХро│рпН роЗро░рпБрокрпНрокро┐роЯродрпНродрпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН</span>
                        </label>
                        <div style="display: flex; gap: 0.5rem; align-items: stretch; flex-wrap: nowrap;">
                            <select name="city" id="citySelect" style="flex: 1; min-width: 200px; padding: 0.75rem; border-radius: 8px; border: 2px solid #ddd; font-size: 1rem;">
                                <option value="auto" selected>ЁЯМН Auto-Detect Location / родро╛ройро╛роХ роХрогрпНроЯро▒ро┐</option>
                                
                                <!-- CHENNAI DISTRICT -->
                                <optgroup label="ЁЯУН Chennai District / роЪрпЖройрпНройрпИ рооро╛ро╡роЯрпНроЯроорпН">
                                    <option value="Chennai">  Chennai / роЪрпЖройрпНройрпИ</option>
                                    <option value="Tambaram">  Tambaram / родро╛роорпНрокро░роорпН</option>
                                    <option value="Pallavaram">  Pallavaram / рокро▓рпНро▓ро╛ро╡ро░роорпН</option>
                                </optgroup>
                                
                                <!-- TRICHY DISTRICT -->
                                <optgroup label="ЁЯУН Tiruchirappalli District / родро┐ро░рпБроЪрпНроЪро┐ рооро╛ро╡роЯрпНроЯроорпН">
                                    <option value="Tiruchirappalli">  Tiruchirappalli (Trichy) / родро┐ро░рпБроЪрпНроЪро┐ро░ро╛рокрпНрокро│рпНро│ро┐</option>
                                    <option value="Thottiyam">  Thottiyam / родрпКроЯрпНроЯро┐ропроорпН</option>
                                    <option value="Lalgudi">  Lalgudi / ро▓ро╛ро▓рпНроХрпБроЯро┐</option>
                                    <option value="Musiri">  Musiri / роорпБроЪро┐ро▒ро┐</option>
                                    <option value="Srirangam">  Srirangam / ро╕рпНро░рпАро░роЩрпНроХроорпН</option>
                                    <option value="Manachanallur">  Manachanallur / роорогроХрпНроХроиро▓рпНро▓рпВро░рпН</option>
                                    <option value="Manapparai">  Manapparai / роорогрокрпНрокро╛ро▒рпИ</option>
                                    <option value="Thuvarankurichi">  Thuvarankurichi / родрпБро╡ро░роЩрпНроХрпБро▒ро┐роЪрпНроЪро┐</option>
                                </optgroup>
                                
                                <!-- NAMAKKAL DISTRICT -->
                                <optgroup label="ЁЯУН Namakkal District / роиро╛роороХрпНроХро▓рпН рооро╛ро╡роЯрпНроЯроорпН">
                                    <option value="Namakkal">  Namakkal (Main City) / роиро╛роороХрпНроХро▓рпН</option>
                                    <option value="Mohanur">  Mohanur / роорпЛроХройрпВро░рпН</option>
                                    <option value="Rasipuram">  Rasipuram / роЗро░ро╛роЪро┐рокрпБро░роорпН</option>
                                    <option value="Tiruchengode">  Tiruchengode / родро┐ро░рпБроЪрпНроЪрпЖроЩрпНроХрпЛроЯрпБ</option>
                                    <option value="Paramathi Velur">  Paramathi Velur / рокро░роородрпНродро┐ ро╡рпЗро▓рпВро░рпН</option>
                                    <option value="Kolli Hills">  Kolli Hills / роХрпКро▓рпНро▓ро┐рооро▓рпИ</option>
                                </optgroup>
                                
                                <!-- COIMBATORE DISTRICT -->
                                <optgroup label="ЁЯУН Coimbatore District / роХрпЛро╡рпИ рооро╛ро╡роЯрпНроЯроорпН">
                                    <option value="Coimbatore">  Coimbatore (Main City) / роХрпЛропроорпНрокрпБродрпНродрпВро░рпН</option>
                                    <option value="Pollachi">  Pollachi / рокрпКро│рпНро│ро╛роЪрпНроЪро┐</option>
                                    <option value="Mettupalayam">  Mettupalayam / роорпЗроЯрпНроЯрпБрокрпНрокро╛ро│рпИропроорпН</option>
                                    <option value="Valparai">  Valparai / ро╡ро╛ро▓рпНрокро╛ро▒рпИ</option>
                                </optgroup>
                                
                                <!-- SALEM DISTRICT -->
                                <optgroup label="ЁЯУН Salem District / роЪрпЗро▓роорпН рооро╛ро╡роЯрпНроЯроорпН">
                                    <option value="Salem">  Salem (Main City) / роЪрпЗро▓роорпН</option>
                                    <option value="Attur">  Attur / роЖродрпНродрпВро░рпН</option>
                                    <option value="Mettur">  Mettur / роорпЗроЯрпНроЯрпВро░рпН</option>
                                    <option value="Omalur">  Omalur / роУрооро▓рпВро░рпН</option>
                                </optgroup>
                                
                                <!-- ERODE DISTRICT -->
                                <optgroup label="ЁЯУН Erode District / роИро░рпЛроЯрпБ рооро╛ро╡роЯрпНроЯроорпН">
                                    <option value="Erode">  Erode (Main City) / роИро░рпЛроЯрпБ</option>
                                    <option value="Gobichettipalayam">  Gobichettipalayam / роХрпЛрокро┐роЪрпЖроЯрпНроЯро┐рокро╛ро│рпИропроорпН</option>
                                    <option value="Bhavani">  Bhavani / рокро╡ро╛ройро┐</option>
                                    <option value="Perundurai">  Perundurai / рокрпЖро░рпБроирпНродрпБро▒рпИ</option>
                                </optgroup>
                                
                                <!-- MADURAI DISTRICT -->
                                <optgroup label="ЁЯУН Madurai District / роородрпБро░рпИ рооро╛ро╡роЯрпНроЯроорпН">
                                    <option value="Madurai">  Madurai (Main City) / роородрпБро░рпИ</option>
                                    <option value="Melur">  Melur / роорпЗро▓рпВро░рпН</option>
                                    <option value="Usilampatti">  Usilampatti / роЙроЪро┐ро▓роорпНрокроЯрпНроЯро┐</option>
                                    <option value="Vadipatti">  Vadipatti / ро╡ро╛роЯро┐рокрпНрокроЯрпНроЯро┐</option>
                                </optgroup>
                                
                                <!-- THANJAVUR DISTRICT -->
                                <optgroup label="ЁЯУН Thanjavur District / родроЮрпНроЪро╛ро╡рпВро░рпН рооро╛ро╡роЯрпНроЯроорпН">
                                    <option value="Thanjavur">  Thanjavur (Main City) / родроЮрпНроЪро╛ро╡рпВро░рпН</option>
                                    <option value="Kumbakonam">  Kumbakonam / роХрпБроорпНрокроХрпЛрогроорпН</option>
                                    <option value="Pattukkottai">  Pattukkottai / рокроЯрпНроЯрпБроХрпНроХрпЛроЯрпНроЯрпИ</option>
                                    <option value="Thiruvidaimarudur">  Thiruvidaimarudur / родро┐ро░рпБро╡ро┐роЯрпИрооро░рпБродрпВро░рпН</option>
                                </optgroup>
                                
                                <!-- OTHER MAJOR DISTRICTS -->
                                <optgroup label="ЁЯУН Other Districts / рокро┐ро▒ рооро╛ро╡роЯрпНроЯроЩрпНроХро│рпН">
                                    <option value="Tiruppur">Tiruppur / родро┐ро░рпБрокрпНрокрпВро░рпН</option>
                                    <option value="Nilgiris">Nilgiris (Ooty) / роирпАро▓роХро┐ро░ро┐</option>
                                    <option value="Dindigul">Dindigul / родро┐рогрпНроЯрпБроХрпНроХро▓рпН</option>
                                    <option value="Theni">Theni / родрпЗройро┐</option>
                                    <option value="Virudhunagar">Virudhunagar / ро╡ро┐ро░рпБродрпБроироХро░рпН</option>
                                    <option value="Sivaganga">Sivaganga / роЪро┐ро╡роХроЩрпНроХрпИ</option>
                                    <option value="Ramanathapuram">Ramanathapuram / роЗро░ро╛роороиро╛родрокрпБро░роорпН</option>
                                    <option value="Tiruvarur">Tiruvarur / родро┐ро░рпБро╡ро╛ро░рпВро░рпН</option>
                                    <option value="Nagapattinam">Nagapattinam / роиро╛роХрокрпНрокроЯрпНроЯро┐ройроорпН</option>
                                    <option value="Pudukkottai">Pudukkottai / рокрпБродрпБроХрпНроХрпЛроЯрпНроЯрпИ</option>
                                    <option value="Ariyalur">Ariyalur / роЕро░ро┐ропро▓рпВро░рпН</option>
                                    <option value="Dharmapuri">Dharmapuri / родро░рпНроорокрпБро░ро┐</option>
                                    <option value="Krishnagiri">Krishnagiri / роХро┐ро░рпБро╖рпНрогроХро┐ро░ро┐</option>
                                    <option value="Vellore">Vellore / ро╡рпЗро▓рпВро░рпН</option>
                                    <option value="Tiruvannamalai">Tiruvannamalai / родро┐ро░рпБро╡рогрпНрогро╛рооро▓рпИ</option>
                                    <option value="Ranipet">Ranipet / ро░ро╛рогро┐рокрпНрокрпЗроЯрпНроЯрпИ</option>
                                    <option value="Tirupattur">Tirupattur / родро┐ро░рпБрокрпНрокродрпНродрпВро░рпН</option>
                                    <option value="Cuddalore">Cuddalore / роХроЯро▓рпВро░рпН</option>
                                    <option value="Villupuram">Villupuram / ро╡ро┐ро┤рпБрокрпНрокрпБро░роорпН</option>
                                    <option value="Kallakurichi">Kallakurichi / роХро│рпНро│роХрпНроХрпБро▒ро┐роЪрпНроЪро┐</option>
                                    <option value="Kanchipuram">Kanchipuram / роХро╛роЮрпНроЪро┐рокрпБро░роорпН</option>
                                    <option value="Chengalpattu">Chengalpattu / роЪрпЖроЩрпНроХро▓рпНрокроЯрпНроЯрпБ</option>
                                    <option value="Tirunelveli">Tirunelveli / родро┐ро░рпБроирпЖро▓рпНро╡рпЗро▓ро┐</option>
                                    <option value="Thoothukudi">Thoothukudi / родрпВродрпНродрпБроХрпНроХрпБроЯро┐</option>
                                    <option value="Tenkasi">Tenkasi / родрпЖройрпНроХро╛роЪро┐</option>
                                    <option value="Kanniyakumari">Kanniyakumari / роХройрпНройро┐ропро╛роХрпБрооро░ро┐</option>
                                    <option value="Karur">Karur / роХро░рпВро░рпН</option>
                                    <option value="Perambalur">Perambalur / рокрпЖро░роорпНрокро▓рпВро░рпН</option>
                                </optgroup>
                                
                                <option value="manual">тЬПя╕П Enter Coordinates Manually / роХрпИроорпБро▒рпИропро╛роХ роЙро│рпНро│ро┐роЯро╡рпБроорпН</option>
                            </select>
                            <button type="button" id="detectLocationBtn" 
                                    style="padding: 0.75rem 1.5rem; background: #27ae60; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600; white-space: nowrap; transition: all 0.3s; position: relative; z-index: 10; flex-shrink: 0;">
                                <i class="fas fa-crosshairs"></i> Detect
                            </button>
                        </div>
                        
                        <!-- Manual Coordinate Input -->
                        <div id="manualCoordinates" style="display: none; margin-top: 1rem; background: rgba(255,255,255,0.1); padding: 1rem; border-radius: 8px; backdrop-filter: blur(10px);">
                            <div style="margin-bottom: 1rem; padding: 0.5rem; background: rgba(52, 152, 219, 0.2); border-radius: 5px;">
                                <p style="color: #fff; font-size: 0.85rem; margin: 0;">
                                    <i class="fas fa-info-circle"></i> <strong class="english-content">Enter GPS Coordinates</strong><strong class="tamil-content">GPS роЖропродрпНродрпКро▓рпИро╡рпБроХро│рпИ роЙро│рпНро│ро┐роЯро╡рпБроорпН</strong>
                                    <br>
                                    <span class="english-content">Range: Latitude (-90 to 90), Longitude (-180 to 180)</span>
                                    <span class="tamil-content">ро╡ро░роорпНрокрпБ: роЕроЯрпНроЪро░рпЗроХрпИ (-90 роорпБродро▓рпН 90), родрпАро░рпНроХрпНроХро░рпЗроХрпИ (-180 роорпБродро▓рпН 180)</span>
                                </p>
                            </div>
                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                <div>
                                    <label style="color: white; display: block; margin-bottom: 0.5rem; font-size: 0.9rem;">
                                        <i class="fas fa-map-marker-alt"></i> <span class="english-content">Latitude / роЕроЯрпНроЪро░рпЗроХрпИ</span>
                                    </label>
                                    <input type="number" id="manualLat" step="0.0001" placeholder="e.g., 13.0827 (Chennai)" min="-90" max="90"
                                           style="width: 100%; padding: 0.75rem; border-radius: 5px; border: 2px solid #3498db; font-size: 1rem;">
                                </div>
                                <div>
                                    <label style="color: white; display: block; margin-bottom: 0.5rem; font-size: 0.9rem;">
                                        <i class="fas fa-map-marker-alt"></i> <span class="english-content">Longitude / родрпАро░рпНроХрпНроХро░рпЗроХрпИ</span>
                                    </label>
                                    <input type="number" id="manualLon" step="0.0001" placeholder="e.g., 80.2707 (Chennai)" min="-180" max="180"
                                           style="width: 100%; padding: 0.75rem; border-radius: 5px; border: 2px solid #3498db; font-size: 1rem;">
                                </div>
                            </div>
                            <button type="button" id="applyManualCoords"
                                    style="margin-top: 1rem; width: 100%; padding: 0.75rem; background: #3498db; color: white; border: none; border-radius: 5px; cursor: pointer; font-weight: 600; font-size: 1rem; transition: all 0.3s;"
                                    onmouseover="this.style.background='#2980b9'" onmouseout="this.style.background='#3498db'">
                                <i class="fas fa-check"></i> <span class="english-content">Apply Coordinates</span><span class="tamil-content">роЖропродрпНродрпКро▓рпИро╡рпБроХро│рпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБ</span>
                            </button>
                        </div>
                        
                        <div id="locationInfo" style="color: #ffd700; margin-top: 0.5rem; font-size: 0.9rem; display: none;">
                            <i class="fas fa-spinner fa-spin" id="locationSpinner" style="display: none;"></i>
                            <i class="fas fa-check-circle" id="locationSuccess" style="display: none;"></i>
                            <i class="fas fa-exclamation-triangle" id="locationWarning" style="display: none; color: #ff9800;"></i>
                            <span id="locationText"></span>
                        </div>
                        <p style="color: #ffd700; margin-top: 0.5rem; font-size: 0.9rem; background: rgba(0,0,0,0.2); padding: 0.75rem; border-radius: 5px;">
                            <i class="fas fa-info-circle"></i>
                            <span class="english-content"><strong>3 Ways to Set Location:</strong><br>
                            1я╕ПтГг Click "Detect" for GPS (browser asks permission)<br>
                            2я╕ПтГг Select a city from dropdown<br>
                            3я╕ПтГг Choose "Enter Coordinates Manually" for custom location</span>
                            <span class="tamil-content"><strong>роЗро░рпБрокрпНрокро┐роЯродрпНродрпИ роЕроорпИроХрпНроХ 3 ро╡ро┤ро┐роХро│рпН:</strong><br>
                            1я╕ПтГг GPS роХрпНроХрпБ "Detect" роХро┐ро│ро┐роХрпН роЪрпЖропрпНроХ (роЙро▓ро╛ро╡ро┐ роЕройрпБроородро┐ роХрпЗроЯрпНроХрпБроорпН)<br>
                            2я╕ПтГг роХрпАро┤рпН рокроЯрпНроЯро┐ропро▓ро┐ро▓рпН роЗро░рпБроирпНродрпБ роироХро░родрпНродрпИродрпН родрпЗро░рпНроирпНродрпЖроЯрпБроХрпНроХро╡рпБроорпН<br>
                            3я╕ПтГг родройро┐рокрпНрокропройрпН роЗро░рпБрокрпНрокро┐роЯродрпНродро┐ро▒рпНроХрпБ "роХрпИроорпБро▒рпИропро╛роХ роЙро│рпНро│ро┐роЯро╡рпБроорпН" родрпЗро░рпНро╡рпБ роЪрпЖропрпНроХ</span>
                        </p>
                    </div>

                    <!-- Temporal Features Input (Hidden by default) -->
                    <div id="temporalFeatures" style="display: none; background: rgba(255,255,255,0.1); padding: 2rem; border-radius: 15px; margin: 1.5rem 0; backdrop-filter: blur(10px);">
                        <input type="hidden" name="use_temporal" id="useTemporal" value="false">
                        
                        <h4 style="color: white; margin-bottom: 1.5rem; text-align: center;">
                            <i class="fas fa-chart-line"></i>
                            <span class="english-content"> Soil Characteristics (Optional)</span>
                            <span class="tamil-content"> роорогрпН рокрогрпНрокрпБроХро│рпН (ро╡ро┐ро░рпБрокрпНрокрооро╛ройродрпБ)</span>
                        </h4>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                            <div style="display: flex; flex-direction: column;">
                                <label style="color: white; margin-bottom: 0.5rem; font-weight: 500;">
                                    <i class="fas fa-tint"></i> 
                                    <span class="english-content">Moisture (0-1)</span>
                                    <span class="tamil-content">роИро░рокрпНрокродроорпН (0-1)</span>
                                </label>
                                <input type="number" id="inputMoisture" name="moisture" min="0" max="1" step="0.01" value="0.6" 
                                       style="padding: 0.75rem; border-radius: 8px; border: 2px solid #ddd; font-size: 1rem;">
                            </div>
                            
                            <div style="display: flex; flex-direction: column;">
                                <label style="color: white; margin-bottom: 0.5rem; font-weight: 500;">
                                    <i class="fas fa-thermometer-half"></i> 
                                    <span class="english-content">Temperature (┬░C)</span>
                                    <span class="tamil-content">ро╡рпЖрокрпНрокроиро┐ро▓рпИ (┬░C)</span>
                                </label>
                                <input type="number" id="inputTemperature" name="temperature" min="0" max="50" step="0.1" value="25" 
                                       style="padding: 0.75rem; border-radius: 8px; border: 2px solid #ddd; font-size: 1rem;">
                            </div>
                            
                            <div style="display: flex; flex-direction: column;">
                                <label style="color: white; margin-bottom: 0.5rem; font-weight: 500;">
                                    <i class="fas fa-flask"></i> 
                                    <span class="english-content">pH Level</span>
                                    <span class="tamil-content">pH роЕро│ро╡рпБ</span>
                                </label>
                                <input type="number" id="inputPH" name="pH" min="0" max="14" step="0.1" value="6.8" 
                                       style="padding: 0.75rem; border-radius: 8px; border: 2px solid #ddd; font-size: 1rem;">
                            </div>
                            
                            <div style="display: flex; flex-direction: column;">
                                <label style="color: white; margin-bottom: 0.5rem; font-weight: 500;">
                                    <i class="fas fa-atom"></i> 
                                    <span class="english-content">Nitrogen (0-1)</span>
                                    <span class="tamil-content">роирпИроЯрпНро░роЬройрпН (0-1)</span>
                                </label>
                                <input type="number" id="inputNitrogen" name="nitrogen" min="0" max="1" step="0.01" value="0.6" 
                                       style="padding: 0.75rem; border-radius: 8px; border: 2px solid #ddd; font-size: 1rem;">
                            </div>
                            
                            <div style="display: flex; flex-direction: column;">
                                <label style="color: white; margin-bottom: 0.5rem; font-weight: 500;">
                                    <i class="fas fa-atom"></i> 
                                    <span class="english-content">Phosphorus (0-1)</span>
                                    <span class="tamil-content">рокро╛ро╕рпНрокро░ро╕рпН (0-1)</span>
                                </label>
                                <input type="number" id="inputPhosphorus" name="phosphorus" min="0" max="1" step="0.01" value="0.55" 
                                       style="padding: 0.75rem; border-radius: 8px; border: 2px solid #ddd; font-size: 1rem;">
                            </div>
                            
                            <div style="display: flex; flex-direction: column;">
                                <label style="color: white; margin-bottom: 0.5rem; font-weight: 500;">
                                    <i class="fas fa-atom"></i> 
                                    <span class="english-content">Potassium (0-1)</span>
                                    <span class="tamil-content">рокрпКроЯрпНроЯро╛роЪро┐ропроорпН (0-1)</span>
                                </label>
                                <input type="number" id="inputPotassium" name="potassium" min="0" max="1" step="0.01" value="0.6" 
                                       style="padding: 0.75rem; border-radius: 8px; border: 2px solid #ddd; font-size: 1rem;">
                            </div>
                            
                            <div style="display: flex; flex-direction: column;">
                                <label style="color: white; margin-bottom: 0.5rem; font-weight: 500;">
                                    <i class="fas fa-leaf"></i> 
                                    <span class="english-content">Organic Matter (0-1)</span>
                                    <span class="tamil-content">роХро░ро┐роо рокрпКро░рпБро│рпН (0-1)</span>
                                </label>
                                <input type="number" id="inputOrganicMatter" name="organic_matter" min="0" max="1" step="0.01" value="0.6" 
                                       style="padding: 0.75rem; border-radius: 8px; border: 2px solid #ddd; font-size: 1rem;">
                            </div>
                        </div>
                        
                        <p style="color: #ffd700; margin-top: 1rem; text-align: center; font-size: 0.9rem;">
                            <i class="fas fa-info-circle"></i>
                            <span class="english-content"> You can manually adjust these values if you have specific soil test data, or leave them as default - the system will use standard values based on your soil classification.</span>
                            <span class="tamil-content"> роХрпБро▒ро┐рокрпНрокро┐роЯрпНроЯ роорогрпН роЪрпЛродройрпИ родро░ро╡рпБ роЗро░рпБроирпНродро╛ро▓рпН роЗроирпНрод роородро┐рокрпНрокрпБроХро│рпИ роХрпИроорпБро▒рпИропро╛роХ роЪро░ро┐роЪрпЖропрпНропро▓ро╛роорпН, роЕро▓рпНро▓родрпБ роЗропро▓рпНрокрпБроиро┐ро▓рпИропро╛роХ ро╡ро┐роЯро▓ро╛роорпН - роЕроорпИрокрпНрокрпБ роЙроЩрпНроХро│рпН роорогрпН ро╡роХрпИрокрпНрокро╛роЯрпНроЯро┐ройрпН роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓рпН роиро┐ро▓рпИропро╛рой роородро┐рокрпНрокрпБроХро│рпИрокрпН рокропройрпНрокроЯрпБродрпНродрпБроорпН.</span>
                        </p>
                        <div style="margin-top: 1rem; padding: 0.75rem; background: rgba(52, 152, 219, 0.2); border-radius: 8px; border-left: 4px solid #3498db;">
                            <p style="color: #fff; font-size: 0.85rem; margin: 0;">
                                <i class="fas fa-lightbulb"></i> <strong class="english-content">How it works:</strong><strong class="tamil-content">роЗродрпБ роОро╡рпНро╡ро╛ро▒рпБ роЪрпЖропро▓рпНрокроЯрпБроХро┐ро▒родрпБ:</strong>
                                <br>
                                <span class="english-content">1. Your image is analyzed to detect soil type<br>2. Standard NPK values for that soil type are automatically applied<br>3. Hybrid CNN+LSTM model provides enhanced predictions</span>
                                <span class="tamil-content">1. роорогрпН ро╡роХрпИропрпИроХрпН роХрогрпНроЯро▒ро┐роп роЙроЩрпНроХро│рпН рокроЯроорпН рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНропрокрпНрокроЯрпБроХро┐ро▒родрпБ<br>2. роЕроирпНрод роорогрпН ро╡роХрпИроХрпНроХро╛рой роиро┐ро▓рпИропро╛рой NPK роородро┐рокрпНрокрпБроХро│рпН родро╛ройро╛роХро╡рпЗ рокропройрпНрокроЯрпБродрпНродрокрпНрокроЯрпБроХро┐ройрпНро▒рой<br>3. роХро▓рокрпНрокро┐рой CNN+LSTM рооро╛родро┐ро░ро┐ роорпЗроорпНрокроЯрпНроЯ роХрогро┐рокрпНрокрпБроХро│рпИ ро╡ро┤роЩрпНроХрпБроХро┐ро▒родрпБ</span>
                            </p>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary upload-btn" id="analyzeBtn">
                        <i class="fas fa-chart-bar"></i>
                        <span class="english-content">Analyze Soil</span>
                        <span class="tamil-content">роорогрпНрогрпИ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНропрпБроЩрпНроХро│рпН</span>
                    </button>

                    <div class="loading" id="loading">
                        <div class="spinner"></div>
                        <p class="english-content">Analyzing soil characteristics...</p>
                        <p class="tamil-content">роорогрпН рокрогрпНрокрпБроХро│рпИ рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роЪрпЖропрпНроХро┐ро▒родрпБ...</p>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- System Info Section -->
    <section class="system-info">
        <div class="container">
            <div class="section-title">
                <h2 class="english-content">Technology Stack</h2>
                <h2 class="tamil-content">родрпКро┤ро┐ро▓рпНроирпБроЯрпНрок роЕроЯрпБроХрпНроХрпБ</h2>
            </div>

            <div class="info-grid">
                <div class="info-card">
                    <h4 class="english-content">Deep Learning Models</h4>
                    <h4 class="tamil-content">роЖро┤рпНроирпНрод роХро▒рпНро▒ро▓рпН рооро╛родро┐ро░ро┐роХро│рпН</h4>
                    <ul>
                        <li>Convolutional Neural Network (CNN)</li>
                        <li>Long Short-Term Memory (LSTM)</li>
                        <li>TensorFlow Framework</li>
                        <li>Image Classification - 93% Accuracy</li>
                    </ul>
                </div>

                <div class="info-card">
                    <h4 class="english-content">Data Sources</h4>
                    <h4 class="tamil-content">родро░ро╡рпБ роЖродро╛ро░роЩрпНроХро│рпН</h4>
                    <ul>
                        <li>Real-time Weather API</li>
                        <li>Soil Image Database</li>
                        <li>Climate Parameters</li>
                        <li>Historical Agricultural Data</li>
                    </ul>
                </div>

                <div class="info-card">
                    <h4 class="english-content">Supported Soil Types</h4>
                    <h4 class="tamil-content">роЖродро░ро╡рпБ роорогрпН ро╡роХрпИроХро│рпН</h4>
                    <ul>
                        <li>Alluvial Soil - ро╡рогрпНроЯро▓рпН роорогрпН</li>
                        <li>Black Soil - роХро░рпБрокрпНрокрпБ роорогрпН</li>
                        <li>Clay Soil - роХро│ро┐роорогрпН</li>
                        <li>Red Soil - роЪро┐ро╡рокрпНрокрпБ роорогрпН</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <h3 class="english-content">Intelligent Farming System</h3>
            <h3 class="tamil-content">рокрпБродрпНродро┐роЪро╛ро▓ро┐ ро╡ро┐ро╡роЪро╛роп роЕроорпИрокрпНрокрпБ</h3>
            <p class="english-content">
                Empowering farmers with AI-driven agricultural insights for sustainable and productive farming.
            </p>
            <p class="tamil-content">
                роиро┐ро▓рпИропро╛рой рооро▒рпНро▒рпБроорпН роЙро▒рпНрокродрпНродро┐ ро╡ро┐ро╡роЪро╛ропродрпНродро┐ро▒рпНроХро╛рой AI-роЙроирпНродрпБродро▓рпН ро╡ро┐ро╡роЪро╛роп роирпБрогрпНрогро▒ро┐ро╡рпБроХро│рпБроЯройрпН ро╡ро┐ро╡роЪро╛ропро┐роХро│рпИ роорпЗроорпНрокроЯрпБродрпНродрпБродро▓рпН.
            </p>

            <div class="social-links">
                <a href="https://github.com/Winston-watt-page" target="_blank" title="GitHub" aria-label="GitHub"><i class="fab fa-github"></i></a>
                <a href="https://www.linkedin.com/in/winstonwatt/" target="_blank" title="LinkedIn" aria-label="LinkedIn"><i class="fab fa-linkedin"></i></a>
                <a href="mailto:wattwinston7@gmail.com" title="Email" aria-label="Email"><i class="fas fa-envelope"></i></a>
            </div>

            <p>&copy; 2026 Intelligent Farming System. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // Language Toggle
        function toggleLanguage() {
            document.body.classList.toggle('tamil-mode');
            localStorage.setItem('language', document.body.classList.contains('tamil-mode') ? 'tamil' : 'english');
        }

        // Load saved language preference and auto-detect location
        window.addEventListener('load', async () => {
            const savedLang = localStorage.getItem('language');
            if (savedLang === 'tamil') {
                document.body.classList.add('tamil-mode');
            }
            
            // Auto-detect location on page load using IP-based detection (no permission needed)
            if (citySelect.value === 'auto') {
                await autoDetectLocation();
            }
        });

        // Upload area click handler
        const uploadArea = document.getElementById('uploadArea');
        const imageInput = document.getElementById('imageInput');
        
        uploadArea.addEventListener('click', function(e) {
            // Prevent click if it's on the button
            if (!e.target.closest('button')) {
                imageInput.click();
            }
        });

        // Image Upload Preview
        const imagePreview = document.getElementById('imagePreview');
        const preview = document.getElementById('preview');
        const analyzeBtn = document.getElementById('analyzeBtn');

        imageInput.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    preview.src = e.target.result;
                    imagePreview.style.display = 'block';
                    analyzeBtn.style.display = 'inline-block';
                }
                reader.readAsDataURL(file);
            }
        });

        // Temporal Features Toggle (NEW)
        const temporalToggle = document.getElementById('temporalToggle');
        const temporalFeatures = document.getElementById('temporalFeatures');
        const useTemporal = document.getElementById('useTemporal');

        temporalToggle.addEventListener('change', function() {
            if (this.checked) {
                temporalFeatures.style.display = 'block';
                useTemporal.value = 'true';
            } else {
                temporalFeatures.style.display = 'none';
                useTemporal.value = 'false';
            }
        });

        // Form Submission
        const uploadForm = document.getElementById('uploadForm');
        const loading = document.getElementById('loading');

        uploadForm.addEventListener('submit', function(e) {
            // Don't prevent default - let form submit normally
            loading.style.display = 'block';
            analyzeBtn.disabled = true;
            analyzeBtn.textContent = 'Processing...';
        });

        // Location Detection (NEW)
        const detectLocationBtn = document.getElementById('detectLocationBtn');
        const citySelect = document.getElementById('citySelect');
        const locationInfo = document.getElementById('locationInfo');
        const locationText = document.getElementById('locationText');
        const locationSpinner = document.getElementById('locationSpinner');
        const locationSuccess = document.getElementById('locationSuccess');
        const locationWarning = document.getElementById('locationWarning');
        const manualCoordinates = document.getElementById('manualCoordinates');
        const manualLat = document.getElementById('manualLat');
        const manualLon = document.getElementById('manualLon');
        const applyManualCoords = document.getElementById('applyManualCoords');

        // Show/hide manual coordinates input
        citySelect.addEventListener('change', function() {
            if (this.value === 'manual') {
                manualCoordinates.style.display = 'block';
            } else {
                manualCoordinates.style.display = 'none';
            }
        });

        // Apply manual coordinates
        applyManualCoords.addEventListener('click', async function() {
            const lat = parseFloat(manualLat.value);
            const lon = parseFloat(manualLon.value);
            
            if (isNaN(lat) || isNaN(lon)) {
                showLocationFeedback('warning', 'тЪая╕П Please enter valid numbers for both latitude and longitude');
                return;
            }
            
            if (lat < -90 || lat > 90 || lon < -180 || lon > 180) {
                showLocationFeedback('warning', 'тЪая╕П Invalid coordinates range. Latitude: -90 to 90, Longitude: -180 to 180');
                return;
            }
            
            showLocationFeedback('spinner', 'ЁЯМН Converting coordinates to location...');
            
            try {
                const response = await fetch('/api/reverse-geocode', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ latitude: lat, longitude: lon })
                });
                
                const location = await response.json();
                
                if (location.error) {
                    throw new Error(location.error);
                }
                
                displayLocation(location, 'manual');
            } catch (error) {
                showLocationFeedback('warning', `Failed: ${error.message}`);
                setTimeout(() => locationInfo.style.display = 'none', 3000);
            }
        });

        // Auto IP-based detection function (no permission needed)
        async function autoDetectLocation() {
            try {
                showLocationFeedback('spinner', 'ЁЯМР Auto-detecting your location via IP address...');
                
                const response = await fetch('/api/get-location');
                const location = await response.json();
                
                if (location.error) {
                    throw new Error(location.error);
                }
                
                console.log('тЬУ IP-based location:', location);
                displayLocation(location, 'ip-auto');
                
                if (location.source === 'default') {
                    showLocationFeedback('warning', 'тЪая╕П Using default location (Chennai). Click "Detect" for GPS or select your city manually.');
                } else {
                    showLocationFeedback('success', `тЬЕ Location detected: ${location.city}, ${location.region}`);
                }
                
            } catch (error) {
                console.error('Auto-detection failed:', error);
                showLocationFeedback('warning', 'тЪая╕П Auto-detection unavailable. Click "Detect" for GPS or select your city manually.');
            }
        }
        
        function showLocationFeedback(type, message) {
            locationInfo.style.display = 'block';
            locationSpinner.style.display = 'none';
            locationSuccess.style.display = 'none';
            locationWarning.style.display = 'none';
            
            if (type === 'spinner') {
                locationSpinner.style.display = 'inline';
            } else if (type === 'success') {
                locationSuccess.style.display = 'inline';
            } else if (type === 'warning') {
                locationWarning.style.display = 'inline';
            }
            
            locationText.textContent = message;
        }
        
        function displayLocation(location, source) {
            const sourceIcon = source === 'browser-gps' ? 'ЁЯУН' : source === 'manual' ? 'тЬПя╕П' : 'ЁЯМР';
            const sourceName = source === 'browser-gps' ? 'GPS-Based' : source === 'manual' ? 'Manual Entry' : 'Auto-Detected';
            
            // Show more detailed location info
            const accuracy = location.accuracy ? ` (┬▒${Math.round(location.accuracy)}m)` : '';
            
            showLocationFeedback('success', 
                `${sourceIcon} ${location.city}, ${location.region}${accuracy} тАв Lat: ${location.latitude.toFixed(4)}, Lon: ${location.longitude.toFixed(4)} тАв ${sourceName}`
            );
            
            // Update hidden inputs for form submission
            let latInput = document.getElementById('detectedLat');
            let lonInput = document.getElementById('detectedLon');
            
            if (!latInput) {
                latInput = document.createElement('input');
                latInput.type = 'hidden';
                latInput.id = 'detectedLat';
                latInput.name = 'detected_lat';
                uploadForm.appendChild(latInput);
            }
            
            if (!lonInput) {
                lonInput = document.createElement('input');
                lonInput.type = 'hidden';
                lonInput.id = 'detectedLon';
                lonInput.name = 'detected_lon';
                uploadForm.appendChild(lonInput);
            }
            
            latInput.value = location.latitude;
            lonInput.value = location.longitude;
            
            // Update city select to auto
            citySelect.value = 'auto';
        }

        async function detectLocation() {
            // Check if browser supports geolocation
            if (!navigator.geolocation) {
                showLocationFeedback('warning', 'тЭМ Geolocation is not supported by your browser. Please select a city or enter coordinates manually.');
                citySelect.value = 'manual';
                manualCoordinates.style.display = 'block';
                return;
            }
            
            try {
                detectLocationBtn.disabled = true;
                detectLocationBtn.innerHTML = '<i class="fas fa-spinner fa-spin"></i> Detecting...';
                showLocationFeedback('spinner', 'ЁЯУН Requesting GPS permission from browser... (This may take up to 60 seconds)');
                
                // Get GPS coordinates from browser with longer timeout
                const position = await new Promise((resolve, reject) => {
                    navigator.geolocation.getCurrentPosition(resolve, reject, {
                        timeout: 60000,  // 60 seconds for slow GPS
                        enableHighAccuracy: true,
                        maximumAge: 0
                    });
                });
                
                console.log('тЬУ GPS Position:', position.coords.latitude, position.coords.longitude);
                showLocationFeedback('spinner', 'ЁЯМН GPS acquired! Converting coordinates to location name...');
                
                // Convert coordinates to location name
                const geocodeResponse = await fetch('/api/reverse-geocode', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        latitude: position.coords.latitude,
                        longitude: position.coords.longitude
                    })
                });
                
                const location = await geocodeResponse.json();
                
                // Add accuracy information from GPS
                location.accuracy = position.coords.accuracy;
                
                if (location.error) {
                    throw new Error(location.error);
                }
                
                console.log('тЬУ Geocoded location:', location);
                displayLocation(location, 'browser-gps');
                
                detectLocationBtn.innerHTML = '<i class="fas fa-check"></i> Detected';
                detectLocationBtn.style.background = '#27ae60';
                
                setTimeout(() => {
                    detectLocationBtn.innerHTML = '<i class="fas fa-crosshairs"></i> Detect';
                    detectLocationBtn.disabled = false;
                }, 2000);
                
            } catch (error) {
                console.error('Location detection failed:', error);
                
                let errorMessage = '';
                let helpText = '';
                
                if (error.code === 1) {
                    // Permission denied
                    errorMessage = 'ЁЯЪл Location permission denied.';
                    helpText = 'Please allow location access in your browser settings, or select a city from the dropdown.';
                } else if (error.code === 2) {
                    // Position unavailable
                    errorMessage = 'ЁЯУб Location unavailable.';
                    helpText = 'Please check your GPS/Location settings, or select a city manually.';
                } else if (error.code === 3) {
                    // Timeout
                    errorMessage = 'тП▒я╕П Location request timeout (took longer than 60 seconds).';
                    helpText = 'Your GPS signal may be weak or blocked. Try moving to an open area with clear sky view, enable High Accuracy mode in your device settings, or select your city from the dropdown.';
                } else {
                    errorMessage = 'тЭМ Failed to detect location.';
                    helpText = error.message || 'Please select a city manually or enter coordinates.';
                }
                
                showLocationFeedback('warning', `${errorMessage} ${helpText}`);
                
                // Show helpful tooltip
                setTimeout(() => {
                    if (confirm(`${errorMessage}\n\n${helpText}\n\nWould you like to select your city manually from the dropdown?`)) {
                        citySelect.focus();
                    }
                }, 500);
                
                detectLocationBtn.innerHTML = '<i class="fas fa-redo"></i> Retry';
                detectLocationBtn.style.background = '#f39c12';
                detectLocationBtn.disabled = false;
                
                setTimeout(() => {
                    detectLocationBtn.innerHTML = '<i class="fas fa-crosshairs"></i> Detect';
                    detectLocationBtn.style.background = '#27ae60';
                }, 4000);
            }
        }

        // Attach event listener for detect button (after function definition)
        detectLocationBtn.addEventListener('click', detectLocation);

        // Smooth Scrolling
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>
